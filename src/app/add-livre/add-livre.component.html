<div ngSkipHydration>
    <div class="container">
        <div>
            <h2>Ajouter un livre :</h2>
        </div>
        <form [formGroup]="myForm" (ngSubmit)="addlivre()" >
            <div hidden  class="col-sm-2 col-md-2 col-lg-2">
                <label>l'id</label>
                <input type="number"  [(ngModel)]="newlivre.idlivre"formControlName="idlivre"  class="form-control">
            </div>
            <!-- <span
            *ngIf="myForm.controls['idlivre'].hasError('required')&& myForm.controls['idlivre'].touched"
            class="text-danger">
            L'id est obligatoire
        </span> -->
            <div class="col-sm-2 col-md-2 col-lg-2">
                <label>titre</label>
                <input type="text"  [(ngModel)]="newlivre.titre" formControlName="titre"  class="form-control">
            </div>
            <span
            *ngIf="myForm.controls['titre'].hasError('required')&& myForm.controls['titre'].touched"
            class="text-danger">
            Le titre est obligatoire
        </span>
        <span
        *ngIf="myForm.controls['titre'].hasError('minlength')&& myForm.controls['titre'].touched"
        class="text-danger">
        Le titre doit contenir au moins 6 caractÃ¨res 
    </span>
            <div class="col-sm-4 col-md-4 col-lg-4">
                <label>auteur</label>
                <input type="text"  [(ngModel)]="newlivre.auteur" formControlName="auteur"  class="form-control">
            </div>
            <span
            *ngIf="myForm.controls['auteur'].hasError('required')&& myForm.controls['auteur'].touched"
            class="text-danger">
            L'auteur est obligatoire
        </span>
        <span
        *ngIf="myForm.controls['auteur'].hasError('minlength')&& myForm.controls['auteur'].touched"
        class="text-danger">
        L'auteur doit contenir au moins 6 caracteres
    </span>
            <div class="col-sm-2 col-md-2 col-lg-2">
                <label>nbre des pages</label>
                <input type="number"  [(ngModel)]="newlivre.nbpages" formControlName="nbpages"  class="form-control">
            </div>
            <span
            *ngIf="myForm.controls['nbpages'].hasError('required')&& myForm.controls['nbpages'].touched"
            class="text-danger">
            Le nbre des pages  est obligatoire
        </span>
        <!-- <div class="col-sm-2 col-md-2 col-lg-2">
            <label>email</label>
            <input type="text"  [(ngModel)]="newlivre.email" formControlName="email"  class="form-control">
        </div>
        <span
        *ngIf="myForm.controls['email'].hasError('required')&& myForm.controls['email'].touched"
        class="text-danger">
        L'email est obligatoire
    </span>
        <span
        *ngIf="myForm.controls['email'].hasError('email')&& myForm.controls['email'].touched"
        class="text-danger">
        L'email n'est pas valide
    </span>
         -->
            <div class="col-sm-4 col-md-4 col-lg-4">
                <label>Date publication</label>
                <input type="date"  [(ngModel)]="newlivre.datepublication" formControlName="datepublication" class="form-control">
            </div>

            <span
            *ngIf="myForm.controls['datepublication'].hasError('required')&& myForm.controls['datepublication'].touched"
            class="text-danger">
            La date est obligatoire
        </span>
            <div class="col-sm-4 col-md-4 col-lg-4">
                 <label>genre</label>
                <select class="form-control form-control-lg" id="idgenre"  [(ngModel)]="newIdgenre" formControlName="idgenre">
                    <option *ngFor="let gen of genres" [value]="gen.idgenre">
                        {{gen.nomgenre}}
                    </option>
                </select>
                <span
                *ngIf="myForm.controls['idgenre'].hasError('required')&& myForm.controls['idgenre'].touched"
                class="text-danger">
                Le genre est obligatoire
                </span> 
                <p>Formulaire valide : {{ myForm.valid }}</p>
                <div class="mt-2">
                    <button type="submit"  class="btn btn-success" [disabled]="myForm.invalid">Ajouter</button>
                    <div>
                        <h3>{{message}}</h3>
                    </div>
                </div>

            </div>

        </form>
    </div>
</div>